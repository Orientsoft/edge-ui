(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{630:function(e,a,t){e.exports={"next-sr-only":"Nodes--next-sr-only--3EIwd7u",page:"Nodes--page--29xujLu",toolbar:"Nodes--toolbar--26ECDc4",actions:"Nodes--actions--37Yi0x2",online:"Nodes--online--3XVrg5A",offline:"Nodes--offline--3s1hIqV",pagination:"Nodes--pagination--2dWIRES"}},636:function(e,a,t){"use strict";t.r(a);var n=t(610),r=t(609),l=t(275),i=t(96),o=t(273),c=t(143),u=t(617),m=t(618),s=t(612),d=t(611),p=t(142),f=t(56),E=t(613),b=t(615),y=t(277),g=t(194),v=t(614),h=t(192),q=t(1),C=t.n(q),O=t(193),w=t.n(O),N=t(274),I=t(115),S=t(630),j=t.n(S);function x(e,a){return _(e)||M(e,a)||k()}function k(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function M(e,a){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var t=[],n=!0,r=!1,l=void 0;try{for(var i=e[Symbol.iterator](),o;!(n=(o=i.next()).done)&&(t.push(o.value),!a||t.length!==a);n=!0);}catch(e){r=!0,l=e}finally{try{n||null==i.return||i.return()}finally{if(r)throw l}}return t}}function _(e){if(Array.isArray(e))return e}var A=10;a.default=function(){var e,a=x(Object(q.useState)([]),2),t=a[0],n=a[1],l,o=x(Object(q.useState)([]),2),u=o[0],s=o[1],p,E=x(Object(q.useState)([]),2),y=E[0],v=E[1],O,S=x(Object(q.useState)([]),2),k=S[0],M=S[1],_,A=x(Object(q.useState)(1),2),V=A[0],Y=A[1],T,z=x(Object(q.useState)(0),2),D=z[0],J=z[1],H,U=x(Object(q.useState)(!1),2),F=U[0],L=U[1],P=h.a.useField(),R,W=x(Object(q.useState)(N.a.None),2),X=W[0],$=W[1],B=function e(){L(!0),I.b.query({params:{pageSize:10,page:V}}).then(function(e){var a=e.data;L(!1),n(a.nodes),J(a.total)})},G=function e(){P.reset(),$(N.a.Create),I.a.query().then(function(e){var a=e.data;return s(a)}),I.d.query({params:{type:"\u4f53\u7cfb"}}).then(function(e){var a=e.data;return v(a)}),I.d.query({params:{type:"\u4e1a\u52a1"}}).then(function(e){var a=e.data;return M(a)})},K=function e(a){P.setValues({id:a.id,tag:a.buss_tags.map(function(e){var a;return e.id}),parallel:a.parallel}),$(N.a.Update),I.d.query({params:{type:"\u4e1a\u52a1"}}).then(function(e){var a=e.data;return M(a)})},Q=function e(){P.validate(function(e,a){e||I.b.create({data:a}).then(function(){$(N.a.None),B()})})},Z=function e(){P.validate(function(e,a){e||I.b.update({data:a}).then(function(){$(N.a.None),B()})})},ee=function e(a){var t=document.createElement("textarea"),n=location.origin+a.url;t.value=n,t.style.width=0,t.style.height=0,document.body.appendChild(t),t.select(),document.execCommand("copy")?g.a.success("\u94fe\u63a5\u5df2\u590d\u5236"):b.a.alert({title:"\u590d\u5236\u94fe\u63a5",content:C.a.createElement("div",null,C.a.createElement("p",null,"\u65e0\u6cd5\u590d\u5236\u4ee5\u4e0b\u94fe\u63a5\u5230\u526a\u8d34\u677f\uff1a"),C.a.createElement("a",{href:n,target:"_blank",rel:"noopener noreferrer"},n)),closeable:!1}),document.body.removeChild(t)},ae=function e(a){return w()(a).format("YYYY-MM-DD HH:mm:ss")},te=function e(a){return a?C.a.createElement("span",{className:j.a.online},"\u5728\u7ebf"):C.a.createElement("span",{className:j.a.offline},"\u79bb\u7ebf")},ne=function e(a,t,n){return C.a.createElement("div",{className:j.a.actions},C.a.createElement(f.a,{type:"secondary",onClick:function e(){return K(n)}},"\u7f16\u8f91"),C.a.createElement(f.a,{type:"normal",disabled:n.online,onClick:function e(){return ee(n)}},"\u590d\u5236\u94fe\u63a5"))};return Object(q.useEffect)(function(){return B()},[V]),C.a.createElement("div",{className:j.a.page},C.a.createElement("div",{className:j.a.toolbar},C.a.createElement(f.a,{type:"primary",onClick:G},"\u65b0\u5efa\u8282\u70b9")),C.a.createElement(d.a,{dataSource:t,loading:F},C.a.createElement(d.a.Column,{dataIndex:"name",title:"\u540d\u79f0"}),C.a.createElement(d.a.Column,{dataIndex:"updatedAt",title:"\u64cd\u4f5c\u65f6\u95f4",cell:ae}),C.a.createElement(d.a.Column,{dataIndex:"parallel",title:"\u5e76\u53d1\u6570\u91cf"}),C.a.createElement(d.a.Column,{dataIndex:"online",title:"\u72b6\u6001",cell:te}),C.a.createElement(d.a.Column,{title:"\u64cd\u4f5c",width:190,cell:ne})),C.a.createElement(m.a,{className:j.a.pagination,shape:"arrow-only",current:V,total:D,pageSize:10,onChange:function e(a){return Y(a)},hideOnlyOnePage:!0,showJump:!1}),C.a.createElement(b.a,{visible:X===N.a.Create,title:"\u65b0\u5efa\u8282\u70b9",closeable:!1,onOk:Q,onCancel:function e(){return $(N.a.None)}},C.a.createElement(i.a,{field:P,labelCol:{span:6},wrapperCol:{span:18},style:{width:380}},C.a.createElement(i.a.Item,{label:"\u540d\u79f0\uff1a",required:!0,requiredMessage:"\u5fc5\u586b\u9879\u4e0d\u80fd\u4e3a\u7a7a",pattern:/^[a-z]+$/,patternMessage:"\u540d\u79f0\u53ea\u80fd\u5305\u542b\u5b57\u6bcd"},C.a.createElement(c.a,{name:"name",trim:!0})),C.a.createElement(i.a.Item,{label:"\u578b\u53f7\uff1a",required:!0,requiredMessage:"\u5fc5\u586b\u9879\u4e0d\u80fd\u4e3a\u7a7a"},C.a.createElement(r.a,{name:"arch_class_id"},u.map(function(e){var a=e.id,t=e.name;return C.a.createElement(r.a.Option,{key:a,value:a},t)}))),C.a.createElement(i.a.Item,{label:"\u4f53\u7cfb\u6807\u7b7e\uff1a",required:!0,requiredMessage:"\u5fc5\u586b\u9879\u4e0d\u80fd\u4e3a\u7a7a"},C.a.createElement(r.a,{name:"tag_id"},y.map(function(e){var a=e.id,t=e.name;return C.a.createElement(r.a.Option,{key:a,value:a},t)}))),C.a.createElement(i.a.Item,{label:"\u4e1a\u52a1\u6807\u7b7e\uff1a",required:!0,requiredMessage:"\u5fc5\u586b\u9879\u4e0d\u80fd\u4e3a\u7a7a"},C.a.createElement(r.a,{name:"buss_tag_ids",mode:"multiple"},k.map(function(e){var a=e.id,t=e.name;return C.a.createElement(r.a.Option,{key:a,value:a},t)}))),C.a.createElement(i.a.Item,{label:"\u5e76\u53d1\u6570\u91cf\uff1a",required:!0,requiredMessage:"\u5fc5\u586b\u9879\u4e0d\u80fd\u4e3a\u7a7a"},C.a.createElement(c.a,{defaultValue:1,min:1,htmlType:"number",name:"parallel"})),C.a.createElement(i.a.Item,{label:"\u521b\u5efa\u6570\u91cf\uff1a",required:!0,requiredMessage:"\u5fc5\u586b\u9879\u4e0d\u80fd\u4e3a\u7a7a"},C.a.createElement(c.a,{defaultValue:1,min:1,max:20,htmlType:"number",name:"count"})))),C.a.createElement(b.a,{visible:X===N.a.Update,title:"\u7f16\u8f91\u8282\u70b9",closeable:!1,onOk:Z,onCancel:function e(){return $(N.a.None)}},C.a.createElement(i.a,{field:P,labelCol:{span:6},wrapperCol:{span:18},style:{width:380}},C.a.createElement(i.a.Item,{label:"\u4e1a\u52a1\u6807\u7b7e\uff1a",required:!0,requiredMessage:"\u5fc5\u586b\u9879\u4e0d\u80fd\u4e3a\u7a7a"},C.a.createElement(r.a,{name:"tag",mode:"multiple"},k.map(function(e){var a=e.id,t=e.name;return C.a.createElement(r.a.Option,{key:a,value:a},t)}))),C.a.createElement(i.a.Item,{label:"\u5e76\u53d1\u6570\u91cf\uff1a",required:!0,requiredMessage:"\u5fc5\u586b\u9879\u4e0d\u80fd\u4e3a\u7a7a"},C.a.createElement(c.a,{min:1,htmlType:"number",name:"parallel"})))))}}}]);