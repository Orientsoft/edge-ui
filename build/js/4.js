(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{630:function(e,a,t){e.exports={"next-sr-only":"Nodes--next-sr-only--3EIwd7u",page:"Nodes--page--29xujLu",toolbar:"Nodes--toolbar--26ECDc4",actions:"Nodes--actions--37Yi0x2",online:"Nodes--online--3XVrg5A",offline:"Nodes--offline--3s1hIqV",pagination:"Nodes--pagination--2dWIRES"}},636:function(e,a,t){"use strict";t.r(a);var n=t(610),r=t(609),l=t(275),i=t(96),o=t(273),c=t(143),u=t(617),m=t(618),s=t(612),d=t(611),p=t(142),f=t(56),E=t(277),b=t(194),y=t(613),g=t(615),h=t(614),v=t(192),C=t(1),q=t.n(C),O=t(193),w=t.n(O),I=t(274),N=t(115),x=t(630),S=t.n(x);function k(e,a){return _(e)||M(e,a)||j()}function j(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function M(e,a){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var t=[],n=!0,r=!1,l=void 0;try{for(var i=e[Symbol.iterator](),o;!(n=(o=i.next()).done)&&(t.push(o.value),!a||t.length!==a);n=!0);}catch(e){r=!0,l=e}finally{try{n||null==i.return||i.return()}finally{if(r)throw l}}return t}}function _(e){if(Array.isArray(e))return e}var A=10;a.default=function(){var e,a=k(Object(C.useState)([{}]),2),t=a[0],n=a[1],l,o=k(Object(C.useState)([]),2),u=o[0],s=o[1],p,E=k(Object(C.useState)([]),2),y=E[0],h=E[1],O,x=k(Object(C.useState)([]),2),j=x[0],M=x[1],_,A=k(Object(C.useState)(1),2),V=A[0],Y=A[1],z,T=k(Object(C.useState)(0),2),D=T[0],J=T[1],H,U=k(Object(C.useState)(!1),2),F=U[0],L=U[1],P=v.a.useField(),R,W=k(Object(C.useState)(I.a.None),2),X=W[0],$=W[1],B=function e(){L(!0),N.b.query({params:{pageSize:10,page:V}}).then(function(e){var a=e.data;L(!1),n(a.nodes),J(a.total)})},G=function e(){P.reset(),$(I.a.Create),N.a.query().then(function(e){var a=e.data;return s(a)}),N.d.query({params:{type:"\u4f53\u7cfb"}}).then(function(e){var a=e.data;return h(a)}),N.d.query({params:{type:"\u4e1a\u52a1"}}).then(function(e){var a=e.data;return M(a)})},K=function e(a){P.setValues({id:a.id,tag:a.buss_tags.map(function(e){var a;return e.id}),parallel:a.parallel}),$(I.a.Update),N.d.query({params:{type:"\u4e1a\u52a1"}}).then(function(e){var a=e.data;return M(a)})},Q=function e(a){return g.a.confirm({title:"\u5220\u9664\u8282\u70b9",content:"\u786e\u5b9a\u5220\u9664\u5f53\u524d\u8282\u70b9\uff1f",closeable:!1,onOk:function e(){return N.b.delete({data:{id:a.id}}).then(B)}})},Z=function e(){P.validate(function(e,a){e||N.b.create({data:a}).then(function(){$(I.a.None),B()})})},ee=function e(){P.validate(function(e,a){e||N.b.update({data:a}).then(function(){$(I.a.None),B()})})},ae=function e(a){var t=document.createElement("textarea"),n=location.origin+a.url;t.value=n,t.style.width=0,t.style.height=0,document.body.appendChild(t),t.select(),document.execCommand("copy")?b.a.success("\u94fe\u63a5\u5df2\u590d\u5236"):g.a.alert({title:"\u590d\u5236\u94fe\u63a5",content:q.a.createElement("div",null,q.a.createElement("p",null,"\u65e0\u6cd5\u590d\u5236\u4ee5\u4e0b\u94fe\u63a5\u5230\u526a\u8d34\u677f\uff1a"),q.a.createElement("a",{href:n,target:"_blank",rel:"noopener noreferrer"},n)),closeable:!1}),document.body.removeChild(t)},te=function e(a){return w()(a).format("YYYY-MM-DD HH:mm:ss")},ne=function e(a){return a?q.a.createElement("span",{className:S.a.online},"\u5728\u7ebf"):q.a.createElement("span",{className:S.a.offline},"\u79bb\u7ebf")},re=function e(a,t,n){return q.a.createElement("div",{className:S.a.actions},q.a.createElement(f.a,{type:"secondary",onClick:function e(){return K(n)}},"\u7f16\u8f91"),q.a.createElement(f.a,{type:"normal",warning:!0,onClick:function e(){return Q(n)}},"\u5220\u9664"),q.a.createElement(f.a,{type:"normal",disabled:n.online,onClick:function e(){return ae(n)}},"\u590d\u5236\u94fe\u63a5"))};return Object(C.useEffect)(function(){return B()},[V]),q.a.createElement("div",{className:S.a.page},q.a.createElement("div",{className:S.a.toolbar},q.a.createElement(f.a,{type:"primary",onClick:G},"\u65b0\u5efa\u8282\u70b9")),q.a.createElement(d.a,{dataSource:t,loading:F},q.a.createElement(d.a.Column,{dataIndex:"name",title:"\u540d\u79f0"}),q.a.createElement(d.a.Column,{dataIndex:"arch_class_name",title:"\u578b\u53f7"}),q.a.createElement(d.a.Column,{dataIndex:"tags.name",title:"\u4f53\u7cfb\u6807\u7b7e"}),q.a.createElement(d.a.Column,{dataIndex:"updatedAt",title:"\u64cd\u4f5c\u65f6\u95f4",cell:te}),q.a.createElement(d.a.Column,{dataIndex:"parallel",title:"\u5e76\u53d1\u6570\u91cf"}),q.a.createElement(d.a.Column,{dataIndex:"online",title:"\u72b6\u6001",cell:ne}),q.a.createElement(d.a.Column,{title:"\u64cd\u4f5c",width:240,cell:re})),q.a.createElement(m.a,{className:S.a.pagination,shape:"arrow-only",current:V,total:D,pageSize:10,onChange:function e(a){return Y(a)},hideOnlyOnePage:!0,showJump:!1}),q.a.createElement(g.a,{visible:X===I.a.Create,title:"\u65b0\u5efa\u8282\u70b9",closeable:!1,onOk:Z,onCancel:function e(){return $(I.a.None)}},q.a.createElement(i.a,{field:P,labelCol:{span:6},wrapperCol:{span:18},style:{width:380}},q.a.createElement(i.a.Item,{label:"\u540d\u79f0\uff1a",required:!0,requiredMessage:"\u5fc5\u586b\u9879\u4e0d\u80fd\u4e3a\u7a7a",pattern:/^[a-z]+[0-9a-z-]*$/,patternMessage:"\u540d\u79f0\u53ea\u80fd\u5305\u542b\u5c0f\u5199\u5b57\u6bcd\u3001\u6570\u5b57\u6216\u51cf\u53f7\u4e14\u5f00\u5934\u5fc5\u987b\u662f\u5c0f\u5199\u5b57\u6bcd"},q.a.createElement(c.a,{name:"name",trim:!0})),q.a.createElement(i.a.Item,{label:"\u578b\u53f7\uff1a",required:!0,requiredMessage:"\u5fc5\u586b\u9879\u4e0d\u80fd\u4e3a\u7a7a"},q.a.createElement(r.a,{name:"arch_class_id"},u.map(function(e){var a=e.id,t=e.name;return q.a.createElement(r.a.Option,{key:a,value:a},t)}))),q.a.createElement(i.a.Item,{label:"\u4f53\u7cfb\u6807\u7b7e\uff1a",required:!0,requiredMessage:"\u5fc5\u586b\u9879\u4e0d\u80fd\u4e3a\u7a7a"},q.a.createElement(r.a,{name:"tag_id"},y.map(function(e){var a=e.id,t=e.name;return q.a.createElement(r.a.Option,{key:a,value:a},t)}))),q.a.createElement(i.a.Item,{label:"\u4e1a\u52a1\u6807\u7b7e\uff1a",required:!0,requiredMessage:"\u5fc5\u586b\u9879\u4e0d\u80fd\u4e3a\u7a7a"},q.a.createElement(r.a,{name:"buss_tag_ids",mode:"multiple"},j.map(function(e){var a=e.id,t=e.name;return q.a.createElement(r.a.Option,{key:a,value:a},t)}))),q.a.createElement(i.a.Item,{label:"\u5e76\u53d1\u6570\u91cf\uff1a",required:!0,requiredMessage:"\u5fc5\u586b\u9879\u4e0d\u80fd\u4e3a\u7a7a"},q.a.createElement(c.a,{defaultValue:1,min:1,htmlType:"number",name:"parallel"})),q.a.createElement(i.a.Item,{label:"\u521b\u5efa\u6570\u91cf\uff1a",required:!0,requiredMessage:"\u5fc5\u586b\u9879\u4e0d\u80fd\u4e3a\u7a7a"},q.a.createElement(c.a,{defaultValue:1,min:1,max:20,htmlType:"number",name:"count"})))),q.a.createElement(g.a,{visible:X===I.a.Update,title:"\u7f16\u8f91\u8282\u70b9",closeable:!1,onOk:ee,onCancel:function e(){return $(I.a.None)}},q.a.createElement(i.a,{field:P,labelCol:{span:6},wrapperCol:{span:18},style:{width:380}},q.a.createElement(i.a.Item,{label:"\u4e1a\u52a1\u6807\u7b7e\uff1a",required:!0,requiredMessage:"\u5fc5\u586b\u9879\u4e0d\u80fd\u4e3a\u7a7a"},q.a.createElement(r.a,{name:"tag",mode:"multiple"},j.map(function(e){var a=e.id,t=e.name;return q.a.createElement(r.a.Option,{key:a,value:a},t)}))),q.a.createElement(i.a.Item,{label:"\u5e76\u53d1\u6570\u91cf\uff1a",required:!0,requiredMessage:"\u5fc5\u586b\u9879\u4e0d\u80fd\u4e3a\u7a7a"},q.a.createElement(c.a,{min:1,htmlType:"number",name:"parallel"})))))}}}]);